var version='0.5.0',RadiFetch=function(t,n){n===void 0&&(n={});var e=(n.baseUrl||'').replace(/\/$/,''),r=function(t,r,o,u){var i=this;this.url=r;this.id=r+'';this.type=t;this.http=new XMLHttpRequest;this.headers=Object.assign(n.headers||{},u||{});this.params=JSON.stringify(o);this.reject=function(t){console.error('[Radi Fetch] WARN: Request caught an error.\n',t)};var p=r.split('?').length-1;if(t==='get'){for(var l in o)r=r.concat((!p?'?':'&')+l+'='+o[l]),p+=1}this.http.open(t,e+r,!0);for(var a in i.headers)i.http.setRequestHeader(a,i.headers[a]);this.abort=function(){var t,n=[],e=arguments.length;while(e--)n[e]=arguments[e];return(t=i.http).abort.apply(t,n)};this.tag=function(t){return(i.id=t, i)}};r.prototype.catch=function(t){typeof t==='function'&&(this.reject=function(){var n=[],e=arguments.length;while(e--)n[e]=arguments[e];t.apply(void 0,n)});return this};r.prototype.then=function(t,n){typeof t==='function'&&(this.resolve=function(){var n=[],e=arguments.length;while(e--)n[e]=arguments[e];t.apply(void 0,n)});typeof n==='function'&&(this.reject=function(){var t=[],e=arguments.length;while(e--)t[e]=arguments[e];n.apply(void 0,t)});var e=this;this.http.onreadystatechange=function(t){var n=this;if(n.readyState===XMLHttpRequest.DONE){var r={headers:e.http.getAllResponseHeaders(),status:n.status,response:n.response};n.status===200?(r.text=function(){return n.responseText},r.json=function(){try{return JSON.parse(this.text())}catch(t){console.error('[Radi Fetch] WARN: Response is not JSON, using fallback to empty JSON.\n',t);return{}}},e.resolve(r)):e.reject(r)}};this.http.send(this.params);return this};function o(t,n){typeof t==='object'&&Object.defineProperty(t,'$loading',{value:n,writable:!0});return t}function u(t,n,e){n===void 0&&(n=function(t){return t});e===void 0&&(e={});var i=e.type;i===void 0&&(i='get');var p=e.retry;p===void 0&&(p=0);return function(l){return function(a){new r(i,t,l,h).then(function(t){a(o(n(t.json()),!1))}).catch(function(r){e.retry>0&&u(t,n,Object.assign({},e,{retry:p-1}))(l)(a)});return o({$loading:!0},!0)}}}u.http=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];return new (Function.prototype.bind.apply(r,[null].concat(t)))};u.http.get=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];return new (Function.prototype.bind.apply(r,[null].concat(['get'],t)))};u.http.post=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];return new (Function.prototype.bind.apply(r,[null].concat(['post'],t)))};u.http.put=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];return new (Function.prototype.bind.apply(r,[null].concat(['put'],t)))};u.http.delete=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];return new (Function.prototype.bind.apply(r,[null].concat(['delete'],t)))};u.http.options=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];return new (Function.prototype.bind.apply(r,[null].concat(['options'],t)))};u.http.head=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];return new (Function.prototype.bind.apply(r,[null].concat(['head'],t)))};u.get=function(t,n,e){return u(t,n,Object.assign({},e,{type:'get'}))};u.post=function(t,n,e){return u(t,n,Object.assign({},e,{type:'post'}))};u.put=function(t,n,e){return u(t,n,Object.assign({},e,{type:'put'}))};u.delete=function(t,n,e){return u(t,n,Object.assign({},e,{type:'delete'}))};u.options=function(t,n,e){return u(t,n,Object.assign({},e,{type:'options'}))};u.head=function(t,n,e){return u(t,n,Object.assign({},e,{type:'head'}))};u.dummy=function(t,n){t===void 0&&(t=function(t){return t});n===void 0&&(n=0);return function(e){return function(r){return(setTimeout(r,n,o(t(e),!1)), o({$loading:!0},!0))}}};return u};window&&(window.RadiFetch=RadiFetch);export default RadiFetch;export { version }